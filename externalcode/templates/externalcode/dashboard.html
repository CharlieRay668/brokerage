{% extends "main/home.html" %}

{% load crispy_forms_tags %}

{% block constantcontent %}
<div class="jumbotron">
    <h1 class="display-3">Status</h1>
    <hr class="my-4">
    <div class="card border-success mb-3" style="max-width: 20rem; display: inline-block" id="tda-db-online">
        <div class="card-header">TDA-DB</div>
        <div class="card-body">
          <h4 class="card-title">ONLINE</h4>
          <button type="button" class="btn btn-success btn-sm" style="display: inline-block;">Start</button>
          <button type="button" class="btn btn-danger btn-sm" style="display: inline-block;">Stop</button>
          <button type="button" class="btn btn-warning btn-sm" style="display: inline-block;">Restart</button>
        </div>
    </div>
    <div class="card border-danger mb-3" style="max-width: 20rem; display: inline-block" id="tda-db-offline">
        <div class="card-header">TDA-DB</div>
        <div class="card-body">
          <h4 class="card-title">OFFLINE</h4>
          <button type="button" class="btn btn-success btn-sm" style="display: inline-block;">Start</button>
          <button type="button" class="btn btn-danger btn-sm" style="display: inline-block;">Stop</button>
          <button type="button" class="btn btn-warning btn-sm" style="display: inline-block;">Restart</button>
        </div>
    </div>
    <div class="card border-success mb-3" style="max-width: 20rem; display: inline-block" id="discord-bot-online">
        <div class="card-header">DISCORD BOT</div>
        <div class="card-body">
          <h4 class="card-title">ONLINE</h4>
          <button type="button" class="btn btn-success btn-sm" style="display: inline-block;">Start</button>
          <button type="button" class="btn btn-danger btn-sm" style="display: inline-block;">Stop</button>
          <button type="button" class="btn btn-warning btn-sm" style="display: inline-block;">Restart</button>
        </div>
    </div>
    <div class="card border-danger mb-3" style="max-width: 20rem; display: inline-block" id="discord-bot-offline">
        <div class="card-header">DISCORD BOT</div>
        <div class="card-body">
          <h4 class="card-title">OFFLINE</h4>
          <button type="button" class="btn btn-success btn-sm" style="display: inline-block;">Start</button>
          <button type="button" class="btn btn-danger btn-sm" style="display: inline-block;">Stop</button>
          <button type="button" class="btn btn-warning btn-sm" style="display: inline-block;">Restart</button>
        </div>
    </div>
    <p class="lead">
      <a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a>
    </p>
</div>
<script>
    var check_status_loop = setInterval(check_status, 1000);
    function check_status(){
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var responseText = JSON.parse(this.responseText)
                tda_db_result = responseText['tda_db_result']
                discord_bot_result = responseText['tda_db_result']
                alert(tda_db_result)
                alert(discord_bot_result)
            }
        };
        xhttp.open("GET", "/checkexternalcode/", true);
        xhttp.send();
    }
</script>
{% endblock %}
